<thy-dialog-header [thyTitle]="'上传' + title"></thy-dialog-header>
<thy-dialog-body class="cropper-dialog-body">
  <div class="cropper-content-container">
    <thy-image-cropper
      #cropper
      [thyImage]="image"
      [thyCropperAspectRatio]="cropperAspectRatio"
      [thyCropperViewMode]="cropperViewMode"
      [thyCropperShape]="cropperShape"
    ></thy-image-cropper>
    <div class="avatar-text-desc">
      <thy-file-select thyStopPropagation (thyOnFileSelect)="selectImage($event)" thyAcceptType=".jpg,.png,.jpeg">
        <button class="pl-0" thyButton="link">重新上传</button>
      </thy-file-select>
      <span class="text-desc">{{ uploadTips }}</span>
    </div>
  </div>
  <div class="preview-container">
    预览
    <div class="text-center">
      <ng-container *ngIf="previewSizes && previewSizes?.length; else defaultPreview">
        <ng-container *ngFor="let currentSize of previewSizes">
          <ng-template [ngTemplateOutlet]="preview" [ngTemplateOutletContext]="{ $implicit: currentSize }"></ng-template>
        </ng-container>
      </ng-container>
      <ng-template #defaultPreview>
        <ng-template [ngTemplateOutlet]="preview" [ngTemplateOutletContext]="{ $implicit: size }"></ng-template>
      </ng-template>
    </div>
  </div>
  <ng-template #preview let-size>
    <div class="preview-image-warp" [ngStyle]="size | thyCropperSizeStyle"></div>
    <div class="preview-image-size">{{ size | thyCropperSizeText }}</div>
  </ng-template>
</thy-dialog-body>

<thy-dialog-footer thyShowBorderTop="true" [thyAlign]="'right'">
  <button class="cancel" thyButton="link-secondary" (click)="close()">取消</button>
  <button thyButton="primary" [thyLoading]="saving" thyLoadingText="上传中" (click)="save()">确定</button>
</thy-dialog-footer>
