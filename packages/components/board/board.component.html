<thy-board-header
  [hasLane]="thyShowLane()"
  [entries]="thyBoardService.entriesWithCards()"
  [headerTemplateRef]="headerTemplateRef"
  [allLanesExpanded]="thyBoardService.allLanesExpanded()"
  [entryCollapsible]="thyBoardService.entryCollapsible()"
  [hasCollapsedEntry]="thyBoardService.hasCollapsedEntry()"
  [container]="elementRef"
  (expandAllLanes)="expandAllLanes($event)"
  (expandEntry)="expandEntry($event)"
>
</thy-board-header>
<div
  class="board-body"
  cdkDropListGroup
  [thyBoardBodyScrollable]="!thyShowLane() || !thyVirtualScroll"
  #boardScrollElement
  [class.board-single-swimlane]="!thyShowLane()"
>
  @if (thyShowLane()) {
    @for (lane of thyBoardService.lanesWithEntriesAndCards(); track lane._id) {
      <thy-board-lane
        [lane]="lane"
        [entries]="thyBoardService.entriesWithCards()"
        [hasLane]="thyShowLane()"
        [virtualScroll]="thyVirtualScroll"
        [laneTemplateRef]="laneTemplateRef"
        [cardTemplateRef]="cardTemplateRef()"
        [allLanesExpanded]="thyBoardService.allLanesExpanded()"
        [laneCollapsible]="thyBoardService.laneCollapsible()"
        [container]="boardScrollElement"
        [defaultCardSize]="thyDefaultCardSize"
        (expandLane)="expandLane($event)"
      ></thy-board-lane>
    }
  } @else {
    <thy-board-lane
      [entries]="thyBoardService.entriesWithCards()"
      [hasLane]="thyShowLane()"
      [virtualScroll]="thyVirtualScroll"
      [laneTemplateRef]="laneTemplateRef"
      [cardTemplateRef]="cardTemplateRef()"
      [container]="boardScrollElement"
      [defaultCardSize]="thyDefaultCardSize"
    ></thy-board-lane>
  }
</div>
